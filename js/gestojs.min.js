var k=null,l=!1;window.d.z={R:function(a){return a.split(".").shift()},Q:function(a){return 1<a.split(".").length?a.split(".").slice(1).join("."):""},L:function(){return!!("ontouchstart"in window)}};(function(a){a.c.A=function(){function a(b){for(var c=[],e=[],i,h,f=-1,j=0,n;j<b.length;j++){h=b[j].startTime;i=[];for(n=0;n<e.length;n++)h<e[n].k&&i.push(e[n]);e=i;e.length||(f++,c[f]={time:h,tracks:[]});c[f].h.push(b[j]);e.push(b[j])}return c}var c={};this.m=function(c,p){var e=/[a-z0-9]+\([^\)]*\)/gi,i=[],h,f,j,n=a(c),q,o,s,v,w,g;for(q in p)if(o=p[q].b,o.length===n.length){for(j=g=h=0;j<o.length;j++){s=o[j];w=0;v=l;if(s.match(e).length!==n[j].h.length){h=0;break}s=s.replace(e,function(a){var b=
a.match(/^([^\(]+)/)[1],a=a.match(/\(([^\)]*)/)[1].split(",");(b=n[j].h[w].m(b,a))||(v=!0);g++;w++;return b});if(v||!(f=eval(s))){h=0;break}h+=f}h&&i.push({name:q,points:h/g})}return i.length?(i.sort(function(a,b){return a.a>b.a?1:a.a<b.a?-1:0}),i):k};this.addListener=function(a,b){c[a]||(c[a]=[]);c[a].push({t:(new Date).getTime(),f:b})};this.removeListener=function(a,b){var e;if(b)for(e=0;e<c[a];e++)c[a][e].O===b&&c[a].splice(e,1);else delete c[a]}}})(window.d);var m=window.d;
m.c.q=function(a){var b=0,c=0;this.id=a;this.a=[];this.startTime=(new Date).getTime();this.s=this.speed=this.duration=this.k=k;this.length=0;this.M=this.offset=this.e=this.N=this.rotation=k;this.push=function(a){this.a.push(a);b+=a.x-this.a[0].x;c+=a.y-this.a[0].y;1<this.a.length&&(this.length+=a.r(this.a[this.a.length-2]))};this.end=function(){this.k||(this.k=(new Date).getTime(),this.duration=this.k-this.startTime,this.e=this.v(Math.max(0,this.a.length-3),this.a.length-1),this.N=this.v(0,Math.min(this.a.length-
1,2)),this.offset=this.I(),this.M=this.H(),this.speed=1E3*(this.length/this.duration),this.s=this.K(),this.rotation=this.J())};this.I=function(){return{x:this.a[this.a.length-1].x-this.a[0].x,y:this.a[this.a.length-1].y-this.a[0].y}};this.H=function(){return{x:b/this.a.length,y:c/this.a.length}};this.v=function(a,b){a=void 0!==a?a:this.a.length-3;b=void 0!==b?b:this.a.length-1;return this.a[b].n(this.a[a])};this.K=function(){return this.a[this.a.length-1].r(this.a[Math.max(0,this.a.length-2)])/(this.a[this.a.length-
1].time-this.a[Math.max(0,this.a.length-2)].time)/1E3};this.J=function(){var a,b=0,c,i,h=0;if(2>=this.a.length)return 0;c=this.a[1].n(this.a[0]);for(a=2;a<this.a.length;a++)i=this.a[a].n(this.a[a-1]),i+=360*h,300<i-c&&(h++,i+=360),-300>i-c&&(h--,i-=360),b+=i-c,c=i;console.log(h,b);return b};this.m=function(a,b){return m.g[a].apply(this,b)}};window.d.event={B:"onGesture",i:"onTrackProgress",p:"onTrackStart",l:"onTrackComplete",o:function(a){this.timestamp=(new Date).getTime();this.type=a;this.h=this.G=this.w=k}};window.d.c.j=function(a,b){this.time=(new Date).getTime();this.x=a;this.y=b;this.P=this.size=1;this.r=function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)};this.n=function(a){return 180*(Math.atan2(a.y-this.y,a.x-this.x)/Math.PI)}};var r=window.d;
r.c.C=function(a){function b(a,b){var j=0,c;if(h[a]){c=new r.event.o(a);c.h=b.h;for(c.w=b.w;j<h[a].length;j++)h[a][j].method.call(this,c)}}function c(){f.sort(function(a,b){return a.startTime>b.startTime?1:a.startTime<b.startTime?-1:0});b(r.event.l,{tracks:f,originalEvent:k});f=[];j=[];n=0;o=k}function u(a){var e={},g;if(f.length){a.preventDefault();if(!q||!a.touches.length)o=setTimeout(c,i.F);if(q){for(;g<a.touches.length;g++)e[j[a.touches[g].identifier]]=!0;for(g=0;g<f.length;g++)e[j[f[g].identifier]]||(f[g].end(),
delete j[f[g].identifier]);b(r.event.i,{tracks:f,originalEvent:a})}else for(g=0;g<f.length;g++)f[g].end()}}function p(a){var c=0,g;if(f.length&&!o){a.preventDefault();if(q)for(;c<a.touches.length;c++)g=a.touches[c],f[j[g.identifier]]?f[j[g.identifier]].push(new r.c.j(g.pageX,g.pageY)):r.u("Fixme! Attemp to move unstarted touch !?");else f[f.length-1].push(new r.c.j(a.pageX,a.pageY));b(r.event.i,{tracks:f,originalEvent:a})}}function e(a){var c=0,g,e;a.preventDefault();o&&(clearTimeout(o),o=k);f.length||
(b(r.event.p,{originalEvent:a}),e=!0);if(q)for(;c<a.touches.length;c++)g=a.touches[c],void 0===j[g.identifier]&&(j[g.identifier]=n++,f[j[g.identifier]]=new r.c.q(j[g.identifier]),f[j[g.identifier]].push(new r.c.j(g.pageX,g.pageY)));else f.push(new r.c.q(f.length)),f[f.length-1].push(new r.c.j(a.pageX,a.pageY));e||b(r.event.i,{tracks:f,originalEvent:a})}var i=this,h={},f=[],j={},n=0,q=r.z.L(),o;this.F=120;this.addListener=function(a,b){h[a]||(h[a]=[]);h[a].push({method:b})};this.removeListener=function(a,
b){var c;if(b)for(c=0;c<h[a];c++)h[a][c].method===b&&h[a].splice(c,1);else delete h[a]};try{q?(a.addEventListener("touchstart",e,l),window.addEventListener("touchmove",p,l),window.addEventListener("touchend",u,l)):(a.addEventListener("mousedown",e,l),window.addEventListener("mousemove",p,l),window.addEventListener("mouseup",u,l))}catch(s){r.u(s.toString(),s)}};function t(a,b){function c(a){var b;if(e[a.type])for(b=0;b<e[a.type].length;b++)e[a.type][b].call(u,a)}var u=this,p={},e={},i,h;this.enabled=!0;this.D=function(a){t.log("Listening gesture ",a);p[a]={priority:0,gesture:t.b[a]}};this.S=function(a){delete p[a]};this.addEventListener=function(a,b){e[a]||(e[a]=[]);e[a].push(b)};this.removeEventListener=function(a,b){var c;if(e[a]){for(c=0;c<e[a].length;c++)e[a][c]!==b&&(void 0).push(e[a][c]);e[a]=void 0}};var f;i=new t.c.C(a||window);i.addListener(t.event.p,
c);i.addListener(t.event.i,c);i.addListener(t.event.l,c);i.addListener(t.event.l,function(a){var b;if(u.enabled&&(a=h.m(a.h,p))&&a.length)b=new t.event.o(t.event.B),b.G=a,c(b)});h=new t.c.A;if(b)for(f in t.b)u.D(f)}t.c={};t.z={};t.event={};t.g={};t.b={};t.debug=!0;t.u=function(a){var b=["[GestoJS]"],c=0;if(t.debug&&"function"===typeof window.console.error){for(;c<arguments.length;c++)b.push(arguments[c]);window.console.error.call(window.console,b.join(" "))}};
t.log=function(){var a=["[GestoJS]"],b=0;if(t.debug&&"function"===typeof window.console.log){for(;b<arguments.length;b++)a.push(arguments[b]);window.console.log.call(window.console,a.join(" "))}};t.warn=function(a){var b=["[GestoJS]"],c=0;if(t.debug&&"function"===typeof window.console.warn){for(;c<arguments.length;c++)b.push(arguments[c]);window.console.warn.call(window.console,b.join(" "))}};window.d=t;var x=window.d;x.g.tap=function(a,b){a=parseInt(a,10)||0;b=parseInt(b,10)||400;return 5>this.length&&this.duration>=a&&this.duration<=b?1:0};x.g.longTap=function(a){a=parseInt(a,10)||400;return 5>this.length&&this.duration>=a?1:0};window.d.g.curve=function(a,b){a="undefined"!==typeof a?parseFloat(a):k;b=parseFloat(b)||30;return this.rotation>=a-b&&this.rotation<=a+b&&20<this.length?1-Math.abs(a-this.rotation)/(2*b):0};var y=window.d;y.g.swipe=function(a,b){a=parseFloat(a);b=parseFloat(b)||30;return 30>Math.abs(this.rotation)&&10<this.length&&this.e>=a-b&&this.e<=a+b?1-Math.abs(a-this.e)/(2*b):0};y.g["throw"]=function(a,b,c){a=parseFloat(a);b=parseFloat(b);c=parseFloat(c)||5;return 30>Math.abs(this.rotation)&&10<this.length&&this.e>=a-b&&this.e<=a+b&&this.s>=c?1-Math.abs(a-this.e)/(2*b):0};var z=window.d;z.b.tap=["tap()"];z.b.twoTap=["tap()","tap()"];z.b.longTap=["longTap()"];z.b.twoTapLong=["tap()","longTap()"];z.b.doubleTap=["tap() && tap()"];z.b.doubleLongTap=["longTap() + longTap()"];z.b.twoDoubleTap=["tap() && tap()","tap() && tap()"];z.b.swipeLeft=["swipe(0)"];z.b.swipeRight=["swipe(180)"];z.b.swipeUp=["swipe(90)"];z.b.swipeDown=["swipe(-90)"];z.b.doubleSwipeLeft=["swipe(0) && swipe(0)"];z.b.doubleSwipeRight=["swipe(180) && swipe(180)"];z.b.doubleSwipeUp=["swipe(90) && swipe(90)"];
z.b.doubleSwipeDown=["swipe(-90) && swipe(-90)"];z.b.circle=["curve(360,40) || curve(-360,40)"];
