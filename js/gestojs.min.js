var g=void 0,n=null,p=!1;
function r(c,a){function b(a){var b;if(h[a.type])for(b=0;b<h[a.type].length;b++)h[a.type][b].call(e,a)}var e=this,m=new r.b.K,h={},l,i;this.enabled=!0;this.O=function(a){r.log("Listening gesture ",a);m.add(new r.b.l(a,r.c[a]),g)};this.ba=function(a){m.remove(a)};this.addEventListener=function(a,b){h[a]||(h[a]=[]);h[a].push(b)};this.removeEventListener=function(a,b){var c;if(h[a]){for(c=0;c<h[a].length;c++)h[a][c]!==b&&g.push(h[a][c]);h[a]=g}};var f;l=new r.b.N(c||window);l.addListener(r.event.C,b);
l.addListener(r.event.p,b);l.addListener(r.event.m,b);l.addListener(r.event.p,b);l.addListener(r.event.m,function(a){var c=new r.event.s(r.event.M);c.g=a.g;c.e=i;b(c)});l.addListener(r.event.p,function(a){var c;if(e.enabled&&(a=i.w(a.g,m))&&a.length)c=new r.event.s(r.event.L),c.R=a,b(c)});i=new r.b.J;if(a)for(f in r.c)e.O(f)}r.b={};r.o={};r.event={};r.e={};r.c={};r.u="GestoJS";r.debug=1;
r.r=function(c){var a=["["+r.u+"]"],b=0;if(r.debug&&r.o.A(window.console.error)){for(;b<arguments.length;b++)a.push(arguments[b]);window.console.error.call(window.console,a.join(" "))}};r.log=function(){var c=["["+r.u+"]"],a=0;if(r.debug&&r.o.A(window.console.log)){for(;a<arguments.length;a++)c.push(arguments[a]);window.console.log.call(window.console,c.join(" "))}};
r.warn=function(c){var a=["["+r.u+"]"],b=0;if(r.debug&&typeof r.o.A(window.console)){for(;b<arguments.length;b++)a.push(arguments[b]);window.console.warn.call(window.console,a.join(" "))}};window.d=r;window.d.o={W:function(){return-1<navigator.userAgent.indexOf("Chrome")&&!(-1<navigator.userAgent.indexOf("iOS")||-1<navigator.userAgent.indexOf("Android"))?p:"ontouchstart"in window||window.Y&&document instanceof DocumentTouch},A:function(c){return"function"===typeof c}};(function(c){c.b.J=function(){function a(a){for(var b=[],c=[],l,i,f=-1,k=0,j;k<a.length;k++){i=a[k].startTime;l=[];for(j=0;j<c.length;j++)i<c[j].q&&l.push(c[j]);c=l;c.length||(f++,b[f]={time:i,tracks:[]});b[f].g.push(a[k]);c.push(a[k])}return b}var b={};this.w=function(b,m){var h,l=/[a-z0-9]+\([^\)]*\)/gi,i=[],f=a(b),k,j,q,t,u,s,C,o,v,D=m.U(),z,H;z=0;for(H=D.length;z<H;z++)if(u=D[z].z,u.length===f.length){for(k=j=0;k<u.length;k++)if(s=u[k],s=s.split(/&&/g),q=s.length,o=f[k].g.length,o!==q)j=0;else{for(v=
q=0;v<o;v++){C=0;h={tracks:b,steps:f,step:f[k],track:f[k].g[v]};s[v]=s[v].replace(l,function(a){var b,s;try{b=a.match(/^([^\(]+)/)[1],s=a.match(/\(([^\)]*)/)[1].split(",")}catch(e){return c.r('Parsing error in "'+a+'": '+e.toString()),0}if(!c.e[b])return c.r('Undefined analyzer "'+b+'"'),0;a=f[k].g[v].w(b,[h].concat(s));C++;return a});if(!(t=eval(s[v]))){q=0;break}q+=t/C}if(!q){j=0;break}j+=q/o}j&&i.push({name:D[z].name,points:j/u.length})}return i.length?(i.sort(function(a,b){return a.a>b.a?1:a.a<
b.a?-1:0}),i):n};this.addListener=function(a,c){b[a]||(b[a]=[]);b[a].push({t:(new Date).getTime(),f:c})};this.removeListener=function(a,c){var h;if(c)for(h=0;h<b[a];h++)b[a][h].Z===c&&b[a].splice(h,1);else delete b[a]}}})(window.d);window.d.b.l=function(c,a,b){this.name=c;this.i=b||0;this.z=[];"string"===typeof a&&this.z.push(a);a instanceof Array&&(this.z=a)};var w=window.d;
w.b.D=function(c){var a=this,b=0,e=0,m=n,h=n,l=0,i=Math.PI/2,f=2*Math.PI;this.id=c;this.a=[];this.startTime=(new Date).getTime();this.q=n;this.k=this.X=this.v=this.rotation=this.length=this.Q=this.speed=this.duration=0;this.B=this.offset=n;this.H=0;this.push=function(c){this.a.push(c);var j,c=1<a.a.length?a.a[Math.max(0,a.a.length-2)]:n;j=a.a[a.a.length-1];a.speed=1E3*(a.length/a.duration);a.offset=a.T();b+=j.x;e+=j.y;a.B=a.S();c&&(a.length+=j.j(c),j=j.n(c),h>i&&j<-i&&l++,h<-i&&j>i&&l--,c=j+l*f,m!==
n&&(a.rotation+=c-m,a.v+=Math.abs(c-m)),m=c,h=j,a.H=Math.floor(a.rotation/f)+(0>a.rotation?1:0),a.k=a.G(Math.max(0,a.a.length-4),a.a.length-1),a.X=a.G(0,Math.min(a.a.length-1,3)),a.Q=a.V())};this.end=function(){this.q||(this.q=(new Date).getTime(),this.duration=this.q-this.startTime)};this.T=function(){return new w.b.h(this.a[this.a.length-1].x-this.a[0].x,this.a[this.a.length-1].y-this.a[0].y)};this.S=function(){return new w.b.h(b/this.a.length,e/this.a.length)};this.G=function(a,b){a=a!==g?a:this.a.length-
3;b=b!==g?b:this.a.length-1;return this.a[b].n(this.a[a])};this.V=function(){return this.a[this.a.length-1].j(this.a[Math.max(0,this.a.length-2)])/(this.a[this.a.length-1].time-this.a[Math.max(0,this.a.length-2)].time)/1E3};this.w=function(a,b){return w.e[a].apply(this,b)}};window.d.event={L:"onGesture",M:"onProgress",m:"onTrackProgress",C:"onTrackStart",p:"onTrackComplete",s:function(c){this.timestamp=(new Date).getTime();this.type=c;this.e=this.g=this.R=this.I=n}};var x=window.d;x.b.h=function(c,a,b,e){this.time=(new Date).getTime();this.x=c;this.y=a;this.size=b||1;this.$=e||1;this.j=function(a){return Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y))};this.n=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};this.F=function(){return(new x.b.h(0,0)).n(this)};this.aa=function(){return new x.b.h(-this.x,-this.y,b,e)}};var y=window.d;
y.b.N=function(c){function a(a,b){var c=0,f;if(i[a]){f=new y.event.s(a);f.g=b.g;for(f.I=b.I;c<i[a].length;c++)i[a][c].method.call(this,f)}}function b(){f.sort(function(a,b){return a.startTime>b.startTime?1:a.startTime<b.startTime?-1:0});a(y.event.p,{tracks:f,originalEvent:n});f=[];k={};j=0;t=n}function e(c){var e={},o=0;if(f.length){c.preventDefault();if(!q||!c.touches.length)t=setTimeout(b,l.P);if(q){for(;o<c.touches.length;o++)e[c.touches[o].identifier]=!0;for(o=0;o<f.length;o++)e[k[f[o].id]]||(f[o].end(),
delete k[f[o].id]);a(y.event.m,{tracks:f,originalEvent:c})}else for(o=0;o<f.length;o++)f[o].end()}}function m(b){var c=0,e;if(f.length&&!t){b.preventDefault();if(q)for(;c<b.touches.length;c++)e=b.touches[c],f[k[e.identifier]]?f[k[e.identifier]].push(new y.b.h(e.pageX,e.pageY)):y.r("Fixme! Attemp to move unstarted touch !?");else f[f.length-1].push(new y.b.h(b.pageX,b.pageY));a(y.event.m,{tracks:f,originalEvent:b})}}function h(b){var c=0,e,h;b.preventDefault();t&&(clearTimeout(t),t=n);f.length||(a(y.event.C,
{originalEvent:b}),h=!0);if(q)for(;c<b.touches.length;c++)e=b.touches[c],k[e.identifier]===g&&(k[e.identifier]=j++,f[k[e.identifier]]=new y.b.D(e.identifier),f[k[e.identifier]].push(new y.b.h(e.pageX,e.pageY)));else f.push(new y.b.D(f.length)),f[f.length-1].push(new y.b.h(b.pageX,b.pageY));h||a(y.event.m,{tracks:f,originalEvent:b})}var l=this,i={},f=[],k={},j=0,q=y.o.W(),t;this.P=120;this.addListener=function(a,b){i[a]||(i[a]=[]);i[a].push({method:b})};this.removeListener=function(a,b){var c;if(b)for(c=
0;c<i[a];c++)i[a][c].method===b&&i[a].splice(c,1);else delete i[a]};try{q?(c.addEventListener("touchstart",h,p),window.addEventListener("touchmove",m,p),window.addEventListener("touchend",e,p)):(c.addEventListener("mousedown",h,p),window.addEventListener("mousemove",m,p),window.addEventListener("mouseup",e,p))}catch(u){y.r(u.toString(),u)}};var A=window.d;function B(){this.list={}}B.prototype.add=function(c,a){var b,e;c instanceof A.b.l&&(c.i=a||c.i||0,this.list[c.name]=c);"string"===typeof c&&(c=c.split(","));if(c instanceof Array){b=0;for(e=c.length;b<e;b++)c[b]instanceof A.b.l?(c[b].i=a||c[b].i||0,this.list[c[b].name]=c[b]):"string"===typeof c[b]&&A.c[c[b]]?this.list[c[b]]=new A.b.l(c[b],A.c[c],a):this.list["gesture"+(b+1)]=new A.b.l("gesture"+(b+1),c[b].toString(),a)}};B.prototype.remove=function(c){delete this.list[c]};
B.prototype.U=function(){var c=[],a;for(a in this.list)c.push(this.list[a]);c.sort(function(a,c){return a.i>c.i?1:c.i>a.i?-1:0});return c};A.b.K=B;var E=window.d;E.e.press=function(){return 1};E.e.tap=function(c,a,b){a=parseInt(a,10)||0;b=parseInt(b,10)||400;return 5>this.length&&this.duration>=a&&this.duration<b?1:0};E.e.longTap=function(c,a){a=parseInt(a,10)||400;return 5>this.length&&this.duration>=a?1:0};window.d.e.pinch=function(c,a,b){var e,m,h,l,i;if(2!==c.step.g.length)return 0;b=parseFloat(b)/180*Math.PI||Math.PI/4;a=parseInt(a,10);e=c.step.g[this===c.step.g[0]?1:0];c=this.a[0].n(e.a[0]);m=this.a[this.a.length-1].n(e.a[e.a.length-1]);h=this.a[0].j(e.a[0]);l=this.a[this.a.length-1].j(e.a[e.a.length-1]);i=this.offset.F();e=e.offset.F();return Math.abs(Math.sin(i)+Math.sin(e))<Math.PI/4&&Math.abs(Math.cos(i)+Math.cos(e))<Math.PI/4&&h*a>l*a&&Math.abs(c-m)<=b?1:0};var F=window.d;F.e.arc=function(c,a,b){a=parseFloat(a)/180*Math.PI;b=parseFloat(b)/180*Math.PI||Math.PI/6;return this.rotation>=a-b&&this.rotation<=a+b&&20<this.length?1-Math.abs(a-this.rotation)/(2*b):0};F.e.circle=function(c,a){var b,e,m=0,h=Number.MAX_VALUE,a=a||0.8;b=0;for(e=this.a.length;b<e;b++)m=Math.max(m,this.a[b].j(this.B)),h=Math.min(h,this.a[b].j(this.B));return Math.max(0,a-(m-h)/m)};F.e.loop=function(c){return Math.abs(this.H)===(c||1)?1:0};window.d.e.line=function(c,a,b){a=parseFloat(a)/180*Math.PI;b=parseFloat(b)/180*Math.PI||Math.PI/6;return this.v<Math.PI/2&&5<this.length&&(this.k>=a-b&&this.k<=a+b||this.k+2*Math.PI>=a-b&&this.k+2*Math.PI<=a+b)?1-Math.abs(a-this.k)/(2*b):0};var G=window.d;G.c.tap=["tap()"];G.c.twoTap=["tap()","tap()"];G.c.longTap=["longTap()"];G.c.twoTapLong=["tap()","longTap()"];G.c.doubleTap=["tap() && tap()"];G.c.doubleLongTap=["longTap() && longTap()"];G.c.twoDoubleTap=["tap() && tap()","tap() && tap()"];G.c.swipeLeft=["line(0)"];G.c.swipeRight=["line(180)"];G.c.swipeUp=["line(90)"];G.c.swipeDown=["line(-90)"];G.c.doubleSwipeLeft=["line(0) && line(0)"];G.c.doubleSwipeRight=["line(180) && line(180)"];G.c.doubleSwipeUp=["line(90) && line(90)"];
G.c.doubleSwipeDown=["line(-90) && line(-90)"];G.c.zoomIn=["pinch(-1) && pinch(-1)"];G.c.zoomOut=["pinch(1) && pinch(1)"];G.c.circle=["arc(400,90) * circle() || arc(-400,90) * circle()"];G.c.circleRight=["arc(400,90) * circle()"];G.c.circleLeft=["arc(-400,90) * circle()"];GestoJS.debug=0;
