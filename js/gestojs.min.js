var j=null,m=!1;window.d.l={P:function(){return-1<navigator.userAgent.indexOf("Chrome")&&!(-1<navigator.userAgent.indexOf("iOS")||-1<navigator.userAgent.indexOf("Android"))?m:"ontouchstart"in window||window.R&&document instanceof DocumentTouch},s:function(c){return"function"===typeof c}};(function(c){c.c.F=function(){function a(a){for(var b=[],e=[],c,h,f=-1,g=0,i;g<a.length;g++){h=a[g].startTime;c=[];for(i=0;i<e.length;i++)h<e[i].n&&c.push(e[i]);e=c;e.length||(f++,b[f]={time:h,tracks:[]});b[f].g.push(a[g]);e.push(a[g])}return b}var b={};this.r=function(b,l){var e,n=/[a-z0-9]+\([^\)]*\)/gi,h=[],f=a(b),g,i,p,r,w,u,v,z,x,s;for(w in l)if(u=l[w].b,u.length===f.length){for(g=i=0;g<u.length;g++)if(v=u[g],v=v.split(/&&/g),p=v.length,x=f[g].g.length,x!==p)i=0;else{for(s=p=0;s<x;s++){z=0;e=
{tracks:b,steps:f,step:f[g],track:f[g].g[s]};v[s]=v[s].replace(n,function(a){var b,i;try{b=a.match(/^([^\(]+)/)[1],i=a.match(/\(([^\)]*)/)[1].split(",")}catch(u){return c.o('Parsing error in "'+a+'": '+u.toString()),0}if(!c.e[b])return c.o('Undefined analyzer "'+b+'"'),0;a=f[g].g[s].r(b,[e].concat(i));z++;return a});if(!(r=eval(v[s]))){p=0;break}p+=r/z}if(!p){i=0;break}i+=p/x}i&&h.push({name:w,points:i/u.length})}return h.length?(h.sort(function(a,b){return a.a>b.a?1:a.a<b.a?-1:0}),h):j};this.addListener=
function(a,c){b[a]||(b[a]=[]);b[a].push({t:(new Date).getTime(),f:c})};this.removeListener=function(a,c){var e;if(c)for(e=0;e<b[a];e++)b[a][e].S===c&&b[a].splice(e,1);else delete b[a]}}})(window.d);var o=window.d;
o.c.z=function(c){var a=this,b=0,k=0,l=j,e=j,n=0,h=Math.PI/2,f=2*Math.PI;this.id=c;this.a=[];this.startTime=(new Date).getTime();this.n=j;this.j=this.Q=this.rotation=this.length=this.K=this.speed=this.duration=0;this.u=this.offset=j;this.C=0;this.push=function(g){this.a.push(g);var i,g=1<a.a.length?a.a[Math.max(0,a.a.length-2)]:j;i=a.a[a.a.length-1];a.speed=1E3*(a.length/a.duration);a.offset=a.N();b+=i.x;k+=i.y;a.u=a.M();g&&(a.length+=i.i(g),i=i.k(g),e>h&&i<-h&&n++,e<-h&&i>h&&n--,g=i+n*f,l!==j&&(a.rotation+=
g-l),l=g,e=i,a.C=Math.floor(a.rotation/f)+(0>a.rotation?1:0),a.j=a.B(Math.max(0,a.a.length-4),a.a.length-1),a.Q=a.B(0,Math.min(a.a.length-1,3)),a.K=a.O())};this.end=function(){this.n||(this.n=(new Date).getTime(),this.duration=this.n-this.startTime)};this.N=function(){return new o.c.h(this.a[this.a.length-1].x-this.a[0].x,this.a[this.a.length-1].y-this.a[0].y)};this.M=function(){return new o.c.h(b/this.a.length,k/this.a.length)};this.B=function(a,b){a=void 0!==a?a:this.a.length-3;b=void 0!==b?b:this.a.length-
1;return this.a[b].k(this.a[a])};this.O=function(){return this.a[this.a.length-1].i(this.a[Math.max(0,this.a.length-2)])/(this.a[this.a.length-1].time-this.a[Math.max(0,this.a.length-2)].time)/1E3};this.r=function(a,b){return o.e[a].apply(this,b)}};window.d.event={G:"onGesture",m:"onTrackProgress",w:"onTrackStart",q:"onTrackComplete",v:function(c){this.timestamp=(new Date).getTime();this.type=c;this.g=this.L=this.D=j}};var q=window.d;q.c.h=function(c,a,b,k){this.time=(new Date).getTime();this.x=c;this.y=a;this.size=b||1;this.T=k||1;this.i=function(a){return Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y))};this.k=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};this.A=function(){return(new q.c.h(0,0)).k(this)};this.U=function(){return new q.c.h(-this.x,-this.y,b,k)}};var t=window.d;
t.c.H=function(c){function a(a,b){var g=0,c;if(h[a]){c=new t.event.v(a);c.g=b.g;for(c.D=b.D;g<h[a].length;g++)h[a][g].method.call(this,c)}}function b(){f.sort(function(a,b){return a.startTime>b.startTime?1:a.startTime<b.startTime?-1:0});a(t.event.q,{tracks:f,originalEvent:j});f=[];g={};i=0;r=j}function k(c){var i={},e=0;if(f.length){c.preventDefault();if(!p||!c.touches.length)r=setTimeout(b,n.J);if(p){for(;e<c.touches.length;e++)i[c.touches[e].identifier]=!0;for(e=0;e<f.length;e++)i[g[f[e].id]]||(f[e].end(),
delete g[f[e].id]);a(t.event.m,{tracks:f,originalEvent:c})}else for(e=0;e<f.length;e++)f[e].end()}}function l(b){var c=0,e;if(f.length&&!r){b.preventDefault();if(p)for(;c<b.touches.length;c++)e=b.touches[c],f[g[e.identifier]]?f[g[e.identifier]].push(new t.c.h(e.pageX,e.pageY)):t.o("Fixme! Attemp to move unstarted touch !?");else f[f.length-1].push(new t.c.h(b.pageX,b.pageY));a(t.event.m,{tracks:f,originalEvent:b})}}function e(b){var e=0,c,h;b.preventDefault();r&&(clearTimeout(r),r=j);f.length||(a(t.event.w,
{originalEvent:b}),h=!0);if(p)for(;e<b.touches.length;e++)c=b.touches[e],void 0===g[c.identifier]&&(g[c.identifier]=i++,f[g[c.identifier]]=new t.c.z(c.identifier),f[g[c.identifier]].push(new t.c.h(c.pageX,c.pageY)));else f.push(new t.c.z(f.length)),f[f.length-1].push(new t.c.h(b.pageX,b.pageY));h||a(t.event.m,{tracks:f,originalEvent:b})}var n=this,h={},f=[],g={},i=0,p=t.l.P(),r;this.J=120;this.addListener=function(a,b){h[a]||(h[a]=[]);h[a].push({method:b})};this.removeListener=function(a,b){var c;
if(b)for(c=0;c<h[a];c++)h[a][c].method===b&&h[a].splice(c,1);else delete h[a]};try{p?(c.addEventListener("touchstart",e,m),window.addEventListener("touchmove",l,m),window.addEventListener("touchend",k,m)):(c.addEventListener("mousedown",e,m),window.addEventListener("mousemove",l,m),window.addEventListener("mouseup",k,m))}catch(w){t.o(w.toString(),w)}};function y(c,a){function b(a){var b;if(e[a.type])for(b=0;b<e[a.type].length;b++)e[a.type][b].call(k,a)}var k=this,l={},e={},n,h;this.enabled=!0;this.I=function(a){y.log("Listening gesture ",a);l[a]={priority:0,gesture:y.b[a]}};this.V=function(a){delete l[a]};this.addEventListener=function(a,b){e[a]||(e[a]=[]);e[a].push(b)};this.removeEventListener=function(a,b){var c;if(e[a]){for(c=0;c<e[a].length;c++)e[a][c]!==b&&(void 0).push(e[a][c]);e[a]=void 0}};var f;n=new y.c.H(c||window);n.addListener(y.event.w,
b);n.addListener(y.event.m,b);n.addListener(y.event.q,b);n.addListener(y.event.q,function(a){var c;if(k.enabled&&(a=h.r(a.g,l))&&a.length)c=new y.event.v(y.event.G),c.L=a,b(c)});h=new y.c.F;if(a)for(f in y.b)k.I(f)}y.c={};y.l={};y.event={};y.e={};y.b={};y.p="GestoJS";y.debug=1;y.o=function(c){var a=["["+y.p+"]"],b=0;if(y.debug&&y.l.s(window.console.error)){for(;b<arguments.length;b++)a.push(arguments[b]);window.console.error.call(window.console,a.join(" "))}};
y.log=function(){var c=["["+y.p+"]"],a=0;if(y.debug&&y.l.s(window.console.log)){for(;a<arguments.length;a++)c.push(arguments[a]);window.console.log.call(window.console,c.join(" "))}};y.warn=function(c){var a=["["+y.p+"]"],b=0;if(y.debug&&typeof y.l.s(window.console)){for(;b<arguments.length;b++)a.push(arguments[b]);window.console.warn.call(window.console,a.join(" "))}};window.d=y;var A=window.d;A.e.press=function(){return 1};A.e.tap=function(c,a,b){a=parseInt(a,10)||0;b=parseInt(b,10)||400;return 5>this.length&&this.duration>=a&&this.duration<b?1:0};A.e.longTap=function(c,a){a=parseInt(a,10)||400;return 5>this.length&&this.duration>=a?1:0};window.d.e.pinch=function(c,a,b){var k,l,e,n,h;if(2!==c.step.g.length)return 0;b=parseFloat(b)/180*Math.PI||Math.PI/4;a=parseInt(a,10);k=c.step.g[this===c.step.g[0]?1:0];c=this.a[0].k(k.a[0]);l=this.a[this.a.length-1].k(k.a[k.a.length-1]);e=this.a[0].i(k.a[0]);n=this.a[this.a.length-1].i(k.a[k.a.length-1]);h=this.offset.A();k=k.offset.A();return Math.abs(Math.sin(h)+Math.sin(k))<Math.PI/4&&Math.abs(Math.cos(h)+Math.cos(k))<Math.PI/4&&e*a>n*a&&Math.abs(c-l)<=b?1:0};var B=window.d;B.e.arc=function(c,a,b){a=parseFloat(a)/180*Math.PI;b=parseFloat(b)/180*Math.PI||Math.PI/6;return this.rotation>=a-b&&this.rotation<=a+b&&20<this.length?1-Math.abs(a-this.rotation)/(2*b):0};B.e.circle=function(c,a){var b,k,l=0,e=Number.MAX_VALUE,a=a||0.8;b=0;for(k=this.a.length;b<k;b++)l=Math.max(l,this.a[b].i(this.u)),e=Math.min(e,this.a[b].i(this.u));return Math.max(0,a-(l-e)/l)};B.e.loop=function(c){return Math.abs(this.C)===(c||1)?1:0};window.d.e.line=function(c,a,b){a=parseFloat(a)/180*Math.PI;b=parseFloat(b)/180*Math.PI||Math.PI/6;return Math.abs(this.rotation)<Math.PI/6&&5<this.length&&(this.j>=a-b&&this.j<=a+b||this.j+2*Math.PI>=a-b&&this.j+2*Math.PI<=a+b)?1-Math.abs(a-this.j)/(2*b):0};var C=window.d;C.b.tap=["tap()"];C.b.twoTap=["tap()","tap()"];C.b.longTap=["longTap()"];C.b.twoTapLong=["tap()","longTap()"];C.b.doubleTap=["tap() && tap()"];C.b.doubleLongTap=["longTap() && longTap()"];C.b.twoDoubleTap=["tap() && tap()","tap() && tap()"];C.b.swipeLeft=["line(0)"];C.b.swipeRight=["line(180)"];C.b.swipeUp=["line(90)"];C.b.swipeDown=["line(-90)"];C.b.doubleSwipeLeft=["line(0) && line(0)"];C.b.doubleSwipeRight=["line(180) && line(180)"];C.b.doubleSwipeUp=["line(90) && line(90)"];
C.b.doubleSwipeDown=["line(-90) && line(-90)"];C.b.zoomIn=["pinch(-1) && pinch(-1)"];C.b.zoomOut=["pinch(1) && pinch(1)"];C.b.circle=["arc(400,90) * circle() || arc(-400,90) * circle()"];C.b.circleRight=["arc(400,90) * circle()"];C.b.circleLeft=["arc(-400,90) * circle()"];GestoJS.debug=0;
